{"ast":null,"code":"import _slicedToArray from\"/home/jbrooks/Documents/GitHub/Podcast-App/podcast-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef,useLayoutEffect}from\"react\";import AudioPlayer from\"./AudioPlayer\";import{jsx as _jsx}from\"react/jsx-runtime\";function PodcastPlayer(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),playerState=_useState2[0],setPlayerState=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),metaData=_useState4[0],setMetaData=_useState4[1];useEffect(function(){fetch(props.rssfeed).then(function(response){return response.text();}).then(function(str){return new window.DOMParser().parseFromString(str,\"text/xml\");}).then(function(data){var tempMetaData={};tempMetaData.channelImage=data.querySelector(\"image\").children[0]?tempMetaData.channelImage=data.querySelector(\"image\").children[0].innerHTML:tempMetaData.channelImage=data.querySelector(\"image\").attributes.href.value;tempMetaData.channelTitle=data.querySelector(\"image\").children[1]?data.querySelector(\"image\").children[1].innerHTML:data.querySelector(\"title\").innerHTML;tempMetaData.channelLink=data.querySelector(\"link\").attributes.href?data.querySelector(\"link\").attributes.href.value:data.querySelector(\"image\").children[2].innerHTML;var itemList=data.querySelectorAll(\"item\");var html=\"\";var items=[];itemList.forEach(function(e){items.push({pubDate:new Date(e.querySelector(\"pubDate\").textContent),title:e.querySelector(\"title\").textContent,sourceAudio:e.querySelector(\"enclosure\").getAttribute(\"url\"),description:e.querySelector(\"description\").textContent,episodeImage:e.querySelector(\"image\").attributes.href.value});});setMetaData(tempMetaData);setPlayerState(items);});},[props.rssfeed]);return playerState.length>=1?/*#__PURE__*/_jsx(AudioPlayer,{episodes:playerState,metaData:metaData}):\"Player loading\";}export default PodcastPlayer;","map":{"version":3,"names":["React","useState","useEffect","useRef","useLayoutEffect","AudioPlayer","PodcastPlayer","props","playerState","setPlayerState","metaData","setMetaData","fetch","rssfeed","then","response","text","str","window","DOMParser","parseFromString","data","tempMetaData","channelImage","querySelector","children","innerHTML","attributes","href","value","channelTitle","channelLink","itemList","querySelectorAll","html","items","forEach","e","push","pubDate","Date","textContent","title","sourceAudio","getAttribute","description","episodeImage","length"],"sources":["/home/jbrooks/Documents/GitHub/Podcast-App/podcast-app/src/PodcastPlayer.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useLayoutEffect } from \"react\";\nimport AudioPlayer from \"./AudioPlayer\";\n\nfunction PodcastPlayer(props) {\n  const [playerState, setPlayerState] = useState([]);\n  const [metaData, setMetaData] = useState({});\n\n  useEffect(() => {\n    fetch(props.rssfeed)\n      .then((response) => response.text())\n      .then((str) => new window.DOMParser().parseFromString(str, \"text/xml\"))\n      .then((data) => {\n        const tempMetaData = {};\n        tempMetaData.channelImage = data.querySelector(\"image\").children[0]\n          ? (tempMetaData.channelImage =\n              data.querySelector(\"image\").children[0].innerHTML)\n          : (tempMetaData.channelImage =\n              data.querySelector(\"image\").attributes.href.value);\n        tempMetaData.channelTitle = data.querySelector(\"image\").children[1]\n          ? data.querySelector(\"image\").children[1].innerHTML\n          : data.querySelector(\"title\").innerHTML;\n        tempMetaData.channelLink = data.querySelector(\"link\").attributes.href\n          ? data.querySelector(\"link\").attributes.href.value\n          : data.querySelector(\"image\").children[2].innerHTML;\n\n        const itemList = data.querySelectorAll(\"item\");\n        let html = ``;\n        const items = [];\n        itemList.forEach((e) => {\n          items.push({\n            pubDate: new Date(e.querySelector(\"pubDate\").textContent),\n            title: e.querySelector(\"title\").textContent,\n            sourceAudio: e.querySelector(\"enclosure\").getAttribute(\"url\"),\n            description: e.querySelector(\"description\").textContent,\n            episodeImage: e.querySelector(\"image\").attributes.href.value,\n          });\n        });\n        setMetaData(tempMetaData);\n        setPlayerState(items);\n      });\n  }, [props.rssfeed]);\n\n  return playerState.length >= 1 ? (\n    <AudioPlayer episodes={playerState} metaData={metaData} />\n  ) : (\n    \"Player loading\"\n  );\n}\n\nexport default PodcastPlayer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}