{"ast":null,"code":"var _jsxFileName = \"/home/jbrooks/Documents/School/otherProjects/Podcast-App/podcast-app/src/PodcastPlayer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, useLayoutEffect } from \"react\";\nimport PlayerControls from \"./PlayerControls\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PodcastPlayer(props) {\n  _s();\n\n  const [playerState, setPlayerState] = useState([]);\n  const audioElement = useRef(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentSongIndex, setCurrentSongIndex] = useState(0);\n  const [nextSongIndex, setNextSongIndex] = useState(currentSongIndex + 1);\n  useEffect(() => {\n    fetch(props.rssfeed).then(response => response.text()).then(str => new window.DOMParser().parseFromString(str, \"text/xml\")).then(data => {\n      const itemList = data.querySelectorAll(\"item\");\n      let html = ``;\n      const items = [];\n      itemList.forEach(e => {\n        items.push({\n          pubDate: new Date(e.querySelector(\"pubDate\").textContent),\n          title: e.querySelector(\"title\").textContent,\n          sourceAudio: e.querySelector(\"enclosure\").getAttribute(\"url\"),\n          description: e.querySelector(\"description\").textContent,\n          episodeImage: e.childNodes[21].attributes.href.value\n        });\n      });\n      setPlayerState(items);\n    });\n  }, [props.rssfeed]);\n  useLayoutEffect(() => {\n    if (isPlaying) {\n      audioElement.current.play();\n    } else {\n      audioElement.current.pause();\n    }\n  });\n  useEffect(() => {\n    setNextSongIndex(() => {\n      if (currentSongIndex + 1 > playerState.length - 1) {\n        return 0;\n      } else {\n        return currentSongIndex + 1;\n      }\n    });\n  }, [currentSongIndex]);\n\n  const SkipControl = function () {\n    let forwards = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    if (forwards) {\n      setCurrentSongIndex(() => {\n        let temp = currentSongIndex;\n        temp++;\n\n        if (temp > playerState.length - 1) {\n          temp = 0;\n        }\n\n        return temp;\n      });\n    } else {\n      setCurrentSongIndex(() => {\n        let temp = currentSongIndex;\n        temp--;\n\n        if (temp < 0) {\n          temp = playerState.length - 1;\n        }\n\n        return temp;\n      });\n    }\n  };\n\n  console.log(playerState);\n  let playerDisplay = episode.map(e => /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [e.title, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), e.sourceAudio, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), JSON.stringify(e.pubDate), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), e.episodeImage, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this));\n  return playerState.length == 0 ? \"Player loading\" : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"podcastPlayer\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n      children: \"Previous Podcast:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: playerState[nextSongIndex].episodeImage,\n      style: {\n        width: \"4em\",\n        height: \"auto\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n      children: playerState[nextSongIndex].title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n      children: playerState[nextSongIndex].pubDate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n      src: playerState[currentSongIndex].sourceAudio,\n      ref: audioElement\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"playerDisplay\", {\n      episode: playerState[currentSongIndex]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PlayerControls, {\n      isPlaying: isPlaying,\n      setIsPlaying: setIsPlaying,\n      SkipControl: SkipControl\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PodcastPlayer, \"4JDoE7Jjd+jomvuPjgDRAP/CDHM=\");\n\n_c = PodcastPlayer;\nexport default PodcastPlayer;\n\nvar _c;\n\n$RefreshReg$(_c, \"PodcastPlayer\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useLayoutEffect","PlayerControls","PodcastPlayer","props","playerState","setPlayerState","audioElement","isPlaying","setIsPlaying","currentSongIndex","setCurrentSongIndex","nextSongIndex","setNextSongIndex","fetch","rssfeed","then","response","text","str","window","DOMParser","parseFromString","data","itemList","querySelectorAll","html","items","forEach","e","push","pubDate","Date","querySelector","textContent","title","sourceAudio","getAttribute","description","episodeImage","childNodes","attributes","href","value","current","play","pause","length","SkipControl","forwards","temp","console","log","playerDisplay","episode","map","JSON","stringify","width","height"],"sources":["/home/jbrooks/Documents/School/otherProjects/Podcast-App/podcast-app/src/PodcastPlayer.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useLayoutEffect } from \"react\";\nimport PlayerControls from \"./PlayerControls\";\n\nfunction PodcastPlayer(props) {\n  const [playerState, setPlayerState] = useState([]);\n  const audioElement = useRef(null);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [currentSongIndex, setCurrentSongIndex] = useState(0);\n  const [nextSongIndex, setNextSongIndex] = useState(currentSongIndex + 1);\n\n  useEffect(() => {\n    fetch(props.rssfeed)\n      .then((response) => response.text())\n      .then((str) => new window.DOMParser().parseFromString(str, \"text/xml\"))\n      .then((data) => {\n        const itemList = data.querySelectorAll(\"item\");\n        let html = ``;\n        const items = [];\n        itemList.forEach((e) => {\n          items.push({\n            pubDate: new Date(e.querySelector(\"pubDate\").textContent),\n            title: e.querySelector(\"title\").textContent,\n            sourceAudio: e.querySelector(\"enclosure\").getAttribute(\"url\"),\n            description: e.querySelector(\"description\").textContent,\n            episodeImage: e.childNodes[21].attributes.href.value,\n          });\n        });\n        setPlayerState(items);\n      });\n  }, [props.rssfeed]);\n\n  useLayoutEffect(() => {\n    if (isPlaying) {\n      audioElement.current.play();\n    } else {\n      audioElement.current.pause();\n    }\n  });\n\n  useEffect(() => {\n    setNextSongIndex(() => {\n      if (currentSongIndex + 1 > playerState.length - 1) {\n        return 0;\n      } else {\n        return currentSongIndex + 1;\n      }\n    });\n  }, [currentSongIndex]);\n\n  const SkipControl = (forwards = true) => {\n    if (forwards) {\n      setCurrentSongIndex(() => {\n        let temp = currentSongIndex;\n        temp++;\n\n        if (temp > playerState.length - 1) {\n          temp = 0;\n        }\n        return temp;\n      });\n    } else {\n      setCurrentSongIndex(() => {\n        let temp = currentSongIndex;\n        temp--;\n\n        if (temp < 0) {\n          temp = playerState.length - 1;\n        }\n        return temp;\n      });\n    }\n  };\n  console.log(playerState);\n\n  let playerDisplay = episode.map((e) => (\n    <div>\n      {e.title}\n      <br />\n      {e.sourceAudio}\n      <br />\n      {JSON.stringify(e.pubDate)}\n      <br />\n      {e.episodeImage}\n      <br />\n      <br />\n    </div>\n  ));\n\n  return playerState.length == 0 ? (\n    \"Player loading\"\n  ) : (\n    <div>\n      podcastPlayer\n      <br />\n      <strong>Previous Podcast:</strong>\n      <img\n        src={playerState[nextSongIndex].episodeImage}\n        style={{ width: \"4em\", height: \"auto\" }}\n      />\n      <b>{playerState[nextSongIndex].title}</b>\n      <b>{playerState[nextSongIndex].pubDate}</b>\n      <audio\n        src={playerState[currentSongIndex].sourceAudio}\n        ref={audioElement}\n      ></audio>\n      <playerDisplay episode={playerState[currentSongIndex]}></playerDisplay>\n      <PlayerControls\n        isPlaying={isPlaying}\n        setIsPlaying={setIsPlaying}\n        SkipControl={SkipControl}\n      />\n    </div>\n  );\n}\n\nexport default PodcastPlayer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}